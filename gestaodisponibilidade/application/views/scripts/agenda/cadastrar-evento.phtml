<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="<?= $this->baseUrl('/perifer-timePicker-b5195df/jquery.timePicker.js') ?>" type="text/javascript"></script>
<script src="<?= $this->baseUrl('/perifer-timePicker-b5195df/jquery.timePicker.min.js') ?>" type="text/javascript"></script>
<link rel="stylesheet" href="<?= $this->baseUrl('/perifer-timePicker-b5195df/timePicker.css') ?>">
<script type='text/javascript'>
    $(document).ready(function() {
        $("#data_inicial").datepicker();
        $("#data_final").datepicker();
        $("#hora1").timePicker();
        $("#hora2").timePicker();
        $("div#profConvidado").hide();
    });
    
   function adicionarProfessor(nome){
       var professores = new Array();
        <? foreach ($this->lista as $idProfessor => $nomeProfessor) {
            echo 'professores[' . $idProfessor . '] = "' . $nomeProfessor . '";';
        }?>
        var x;
        for (x in professores) {
            if (professores[x] == nome) {
                
                $.ajax({
                    url: '<?=$this->baseUrl('/professor/get-eventos/id/') ?>' + x,
                    context: this,
                    async: false,
                    success: function(data) {
                        alert(data);
                    }
                });
                
                var isHiden = true;
                if (isHiden) {
                    $("div#profConvidado").css({'overflow' : 'scroll', 'width' : '850px'});
                    $("div#profConvidado").show();
                    isHiden = false;
                }
                $("tbody#profConvidado").append('<tr><td>' + nome + '</td></tr>');
            }
        }
   }
</script>

<script type='text/javascript'>
    $(function() {
        var availableTags = [<?$virgula = false; foreach ($this->lista as $idProfessor => $nomeProfessor) {
                     if ($virgula == false) {
                        echo '"' . $nomeProfessor . '"';
                        $virgula = true;
                     } else {
                        echo ', "' . $nomeProfessor . '"';
                     }
                    }?>];

		$("#convidados").autocomplete({
			source: availableTags
		});
	});
</script>

<form method="POST" action="<?= $this->baseUrl('agenda/add-evento') ?>">
    <div style="margin-left: 5%;width: 50%">
        Descrição do evento:  <input id="titulo" name="titulo" class="i-format" type="text" /><p/>
        Data Inicial :<input class="subscr_email" id="data_inicial" name="data_inicial" type="text" /><p/>
        Data Final   :<input class="subscr_email" id="data_final" name="data_final" type="text" /><p/>
        Hora Inicial:  <input name="hora1"  class="subscr_email" type="text" id="hora1"  size="5" maxlength="5"><p/>
        Hora Final:  <input name="hora2" class="subscr_email"  type="text" id="hora2"   size="5" maxlength="5"><p/>

        Adicionar convidado:<input id="convidados" type="text" class="i-format" />
        <a onclick="adicionarProfessor($('#convidados').val())" class="button">Adicionar</a><p/>
        <div id="profConvidado">
            <center><span>Dia 01/01/2000</span></center>
            <table id="profConvidado">
                <thead>
                    <tr>
                        <td></td>
                        <? for ($i = 0; $i < 24; $i++) {
                            echo '<td>' . $i . ':30</td>';
                        } ?>
                    </tr>
                </thead>
                <tbody id="profConvidado">
                </tbody>
            </table>
        </div>
        
    </div>
    <br />
   <INPUT style="margin-left: 25%;" TYPE="submit" VALUE="Cadastrar evento" class="button white large">
 </form>